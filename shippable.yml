language: python
build_image: drydock/u12pyt:prod
python:
  - 2.6
  - 2.7
  #- 3.2
  #- 3.3
  #- 3.4
  #- pypy

# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - echo $COMMITTER
  - echo $LAST_AUTHOR
  # exclude
#branches:
 #  - TEST


#cache: true
#integrations:
#  notifications:
#    - integrationName: hipchat
#      type: hipchat
#      recipients:
#        - "@VootlaChaitanya"
#        - "#roomOne"
#      on_success: always
#      on_failure: always
jobs:
  - name: manifest-test
    type: manifest
    steps:
      - TASK: managed
      - IN: file
      - IN: state
      - IN: trigger
        switch: 'off'
      - IN: externalCIServer
        switch: 'off'
      - OUT: state
  - name: manifest-test-child
    type: manifest
    steps:
      - TASK: managed
      - IN: params
        switch: 'off'
      - IN: manifest-test
      - IN: time
      - IN: integration
      - IN: version
        switch: 'off'
resources:
  - name: file
    type: file
    integration: shipdeploy
    versionTemplate:
      versionName: vn
      sourceName: sn
  - name: version
    type: version
    versionTemplate:
      versionName: 0.0.1
  - name: trigger
    type: trigger
    versionTemplate:
      counter: '1'
  - name: time
    type: time
    versionTemplate:
      interval: '1'
  - name: state
    type: state
  - name: externalCIServer
    type: externalCIServer
  - name: integration
    type: integration
    integration: shipdeploy
  - name: params
    type: params
    versionTemplate:
      params:
        KEY1: "value1" 
